{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {
    "collapsed": false,
    "scrolled": true
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Loading the video\n",
      "200.484855324\n",
      "200.480170235\n",
      "200.425559896\n",
      "200.233194927\n",
      "200.393378183\n",
      "200.631685475\n",
      "200.868954475\n",
      "201.120486111\n",
      "201.439062018\n",
      "201.779889564\n",
      "202.071319927\n",
      "201.625255594\n",
      "199.301302083\n",
      "197.293290895\n",
      "196.510572434\n",
      "196.415004823\n",
      "196.39206115\n",
      "196.307606096\n",
      "196.101388889\n",
      "196.063744213\n",
      "195.994953221\n",
      "195.667468171\n",
      "195.41380787\n",
      "195.564964796\n",
      "195.797244406\n",
      "196.13488233\n",
      "196.571943962\n",
      "197.004016686\n",
      "197.44536169\n",
      "197.834257812\n",
      "198.243578318\n",
      "198.940271508\n",
      "198.949349923\n",
      "199.056457851\n",
      "199.315832851\n",
      "199.649478684\n",
      "199.931431809\n",
      "200.112841435\n",
      "200.336533565\n",
      "200.544332079\n",
      "200.724728009\n",
      "200.463932774\n",
      "198.485649113\n",
      "196.414710166\n",
      "195.49971113\n",
      "195.29527826\n",
      "195.330274402\n",
      "195.475193866\n",
      "195.770810185\n",
      "196.101536941\n",
      "196.20005353\n",
      "196.119071181\n",
      "195.979987461\n",
      "195.913237365\n",
      "195.958085938\n",
      "196.146508005\n",
      "196.428148148\n",
      "196.760552662\n",
      "197.063800154\n",
      "197.358118731\n",
      "197.618797261\n",
      "197.83501495\n",
      "198.285418596\n",
      "198.286467496\n",
      "198.383234954\n",
      "198.580099344\n",
      "198.796251929\n",
      "199.040847801\n",
      "198.939323881\n",
      "197.338429302\n",
      "195.150531925\n",
      "194.274013792\n",
      "193.939097704\n",
      "193.843846933\n",
      "193.868150077\n",
      "193.983455343\n",
      "194.207234279\n",
      "194.34528887\n",
      "194.310162519\n",
      "194.193682485\n",
      "194.122631173\n",
      "194.192971161\n",
      "194.382973573\n",
      "194.660398823\n",
      "195.019549576\n",
      "195.37886767\n",
      "195.705493827\n",
      "195.984350887\n",
      "196.213884066\n",
      "196.414451678\n",
      "196.616225405\n",
      "196.852510127\n",
      "197.1223288\n",
      "197.660817901\n",
      "197.429707272\n",
      "195.196002604\n",
      "193.236736593\n",
      "192.736202739\n",
      "192.517828414\n",
      "192.490739294\n",
      "193.881276524\n",
      "196.172402103\n",
      "198.665490934\n",
      "199.022362076\n",
      "199.190626929\n",
      "199.24762635\n",
      "199.333573013\n",
      "199.537677951\n",
      "199.839442998\n",
      "200.172702064\n",
      "200.54790461\n",
      "200.93479022\n",
      "201.356222029\n",
      "201.714644579\n",
      "202.002918596\n",
      "202.265739294\n",
      "202.510251254\n",
      "202.773244117\n",
      "203.063982446\n",
      "203.397677951\n",
      "203.632231385\n",
      "203.165937018\n",
      "201.148348283\n",
      "199.641996528\n",
      "198.931704765\n",
      "198.964225984\n",
      "199.004857253\n",
      "199.060695891\n",
      "199.226630015\n",
      "199.474272762\n",
      "199.692741127\n",
      "199.772266107\n",
      "199.811740451\n",
      "199.90349537\n",
      "200.099937307\n",
      "200.374435282\n",
      "200.705967882\n",
      "201.055792342\n",
      "201.439650367\n",
      "201.822420428\n",
      "202.150636574\n",
      "202.424116512\n",
      "202.673785687\n",
      "202.904787326\n",
      "203.162774402\n",
      "203.418431713\n",
      "203.713655478\n",
      "204.06129485\n",
      "204.329137249\n",
      "203.884271798\n",
      "201.869535108\n",
      "200.348153935\n",
      "200.066290509\n",
      "199.971100019\n",
      "200.019050926\n",
      "200.270662133\n",
      "200.428757234\n",
      "200.652070313\n",
      "200.786217207\n",
      "200.789102527\n",
      "200.787568962\n",
      "200.856486786\n",
      "201.060756173\n",
      "201.417747878\n",
      "201.843417245\n",
      "202.168431713\n",
      "202.464522087\n",
      "202.733963638\n",
      "202.959211034\n",
      "203.126452546\n",
      "203.27337336\n",
      "203.494850019\n",
      "203.747751736\n",
      "204.064620467\n",
      "204.328638117\n",
      "204.094883777\n",
      "202.56469184\n",
      "200.829052373\n",
      "200.328967496\n",
      "200.187917149\n",
      "200.208201678\n",
      "200.322936439\n",
      "200.584313754\n",
      "200.932291667\n",
      "201.13323206\n",
      "201.150448495\n",
      "201.262886285\n",
      "201.32675299\n",
      "201.468284626\n",
      "201.750576775\n",
      "202.071796875\n",
      "202.383650656\n",
      "202.704932485\n",
      "203.038737944\n",
      "203.375758102\n",
      "203.647890625\n",
      "203.860818866\n",
      "204.080112365\n",
      "204.328630883\n",
      "204.629073592\n",
      "204.940589796\n",
      "205.140897473\n",
      "204.548342496\n",
      "202.276182485\n",
      "200.709192708\n",
      "200.415530478\n",
      "200.342619117\n",
      "200.381499807\n",
      "200.407327353\n",
      "200.799376447\n",
      "200.958628472\n",
      "200.994655671\n",
      "201.019770448\n",
      "201.151306424\n",
      "201.356525849\n",
      "201.655142265\n",
      "202.460226659\n",
      "202.596868731\n",
      "202.817163387\n",
      "203.132188947\n",
      "203.382600791\n",
      "203.631308835\n",
      "203.898893711\n",
      "204.165041474\n",
      "204.429182099\n",
      "204.699466146\n",
      "204.966767458\n",
      "205.269456501\n",
      "205.626415413\n",
      "205.857158565\n",
      "205.408664159\n",
      "203.260580633\n",
      "201.501735629\n",
      "201.030275849\n",
      "200.88838397\n",
      "200.865079572\n",
      "200.808863812\n",
      "200.850872396\n",
      "201.070495756\n",
      "201.309052373\n",
      "201.430796682\n",
      "201.485198206\n",
      "201.595981867\n",
      "201.819986979\n",
      "202.133394579\n",
      "202.502971644\n",
      "202.86747637\n",
      "203.712124325\n",
      "203.838063754\n",
      "204.054189815\n",
      "204.30648968\n",
      "204.542537133\n",
      "204.790508777\n",
      "205.073869599\n",
      "205.368554687\n",
      "205.67540027\n",
      "205.992253569\n",
      "206.314538966\n",
      "206.675057388\n",
      "206.99365162\n",
      "207.278610147\n",
      "206.975753762\n",
      "204.975801987\n",
      "203.113826678\n",
      "202.581739005\n",
      "202.414053337\n",
      "202.420357832\n",
      "202.444095775\n",
      "202.556899113\n",
      "202.787284433\n",
      "202.983103781\n",
      "203.030668403\n",
      "203.01175299\n",
      "203.057826485\n",
      "203.219605999\n",
      "203.467330729\n",
      "203.815607157\n",
      "204.178025656\n",
      "204.915294657\n",
      "205.028626061\n",
      "205.218887442\n",
      "205.428490066\n",
      "205.616377797\n",
      "205.806752508\n",
      "206.005067998\n",
      "206.215182774\n",
      "206.448690201\n",
      "206.73273968\n",
      "207.052670718\n",
      "207.313123071\n",
      "206.943976177\n",
      "205.005372299\n",
      "199.518220486\n",
      "199.097544367\n",
      "198.878502122\n",
      "198.86428289\n",
      "198.984049961\n",
      "199.261375386\n",
      "199.623064718\n",
      "199.767799479\n",
      "199.710453318\n",
      "199.650332272\n",
      "199.786520544\n",
      "199.974165702\n",
      "200.199008488\n",
      "200.428918789\n",
      "200.701969039\n",
      "200.943875868\n",
      "201.372665413\n",
      "201.463136092\n",
      "201.595990548\n",
      "201.73398534\n",
      "201.879367766\n",
      "202.092558835\n",
      "202.365149981\n",
      "202.66213831\n",
      "202.593881655\n",
      "200.959682677\n",
      "198.529093364\n",
      "197.706751061\n",
      "197.424713542\n",
      "197.360661651\n",
      "197.379890046\n",
      "197.438365644\n",
      "197.628212288\n",
      "197.88234375\n",
      "197.981832562\n",
      "197.959816744\n",
      "197.94217689\n",
      "198.079435282\n",
      "198.330153356\n",
      "198.649863522\n",
      "199.024863522\n",
      "199.424024402\n",
      "199.790197724\n",
      "200.155307195\n",
      "200.445230517\n",
      "200.723969425\n",
      "200.958477527\n",
      "201.508837288\n",
      "201.626536941\n",
      "201.822558835\n",
      "202.058013117\n",
      "202.361069637\n",
      "202.696724537\n",
      "202.896049865\n",
      "202.135758102\n",
      "199.659983603\n",
      "197.838788098\n",
      "197.406069155\n",
      "197.238758681\n",
      "197.196701871\n",
      "197.153126447\n",
      "197.202057774\n",
      "197.444180652\n",
      "197.672444541\n",
      "197.744808063\n",
      "197.770456211\n",
      "197.85154755\n",
      "198.036003086\n",
      "198.322632137\n",
      "198.702259356\n",
      "199.12089892\n",
      "199.53243152\n",
      "199.894726563\n",
      "200.209731867\n",
      "200.500422936\n",
      "200.788553723\n",
      "201.049456983\n",
      "201.318016011\n",
      "201.856762153\n",
      "201.971783372\n",
      "202.189854842\n",
      "202.50211034\n",
      "202.828619792\n",
      "203.114706308\n",
      "202.880621142\n",
      "200.75716387\n",
      "198.364668692\n",
      "197.689399113\n",
      "197.470937982\n",
      "197.44251929\n",
      "197.424505208\n",
      "197.482990451\n",
      "197.698922164\n",
      "197.92436005\n",
      "198.010684317\n",
      "197.996616512\n",
      "198.033792921\n",
      "198.176651235\n",
      "198.433767843\n",
      "198.771901524\n",
      "199.51522473\n",
      "199.892276235\n",
      "200.236415895\n",
      "200.506587095\n",
      "200.773124518\n",
      "200.991832562\n",
      "201.255462963\n",
      "201.499182099\n",
      "202.011531154\n",
      "202.133800637\n",
      "202.384958526\n",
      "202.694367766\n",
      "203.005706019\n",
      "202.875946663\n",
      "201.206283275\n",
      "198.67878424\n",
      "197.974681713\n",
      "197.735409433\n",
      "197.748551312\n",
      "197.869598765\n",
      "198.081045042\n",
      "198.399819637\n",
      "198.594166184\n",
      "198.580070409\n",
      "198.442392458\n",
      "198.396775174\n",
      "198.51341387\n",
      "198.761588542\n",
      "199.086389371\n",
      "199.447684703\n",
      "199.814356674\n",
      "200.150667438\n",
      "200.437076582\n",
      "200.684451196\n",
      "200.892089603\n",
      "201.06515191\n",
      "201.250017843\n",
      "201.479068769\n",
      "201.759957562\n",
      "202.342171103\n",
      "202.271172357\n",
      "200.834323881\n",
      "198.273168885\n",
      "197.349263117\n",
      "197.022759934\n",
      "196.956462674\n",
      "197.060520833\n",
      "197.293272087\n",
      "197.632935475\n",
      "197.895437886\n",
      "197.937088638\n",
      "197.839285301\n",
      "197.779352334\n",
      "197.877188465\n",
      "198.096587095\n",
      "198.391650752\n",
      "198.782819734\n",
      "199.173959298\n",
      "199.559213927\n",
      "199.894984086\n",
      "200.194236593\n",
      "200.446647377\n",
      "200.673114873\n",
      "200.867844811\n",
      "201.087889178\n",
      "201.364885224\n",
      "201.664917535\n",
      "201.999576582\n",
      "201.926035397\n",
      "200.070273438\n",
      "197.339284819\n",
      "196.764154128\n",
      "196.300076678\n",
      "196.1076114\n",
      "196.025074267\n",
      "195.990235822\n",
      "196.123918306\n",
      "196.332952836\n",
      "196.446698978\n",
      "196.425711806\n",
      "196.429684606\n",
      "196.55630787\n",
      "196.800467303\n",
      "197.133728299\n",
      "197.534580922\n",
      "197.92299865\n",
      "198.340347704\n",
      "198.722283951\n",
      "199.021588059\n",
      "199.307782118\n",
      "199.563940972\n",
      "200.058733603\n",
      "200.312355806\n",
      "200.606191647\n",
      "200.926112558\n",
      "201.282746914\n",
      "201.564979263\n",
      "201.244251543\n",
      "198.844271316\n",
      "196.311769387\n",
      "195.182570891\n",
      "195.162862654\n",
      "195.238805459\n",
      "195.2973587\n",
      "195.372057292\n",
      "195.621012731\n",
      "195.872947049\n",
      "196.00668451\n",
      "196.046124132\n",
      "196.130193866\n",
      "196.311354649\n",
      "196.635261863\n",
      "197.034588156\n",
      "197.479297357\n",
      "197.913192515\n",
      "198.317672164\n",
      "198.639472897\n",
      "198.961671971\n",
      "199.23833912\n",
      "199.50622637\n",
      "199.786272184\n",
      "200.057826485\n",
      "200.326368152\n",
      "200.65702064\n",
      "201.046191647\n",
      "201.428720583\n",
      "201.563443769\n",
      "200.503885995\n",
      "197.913416763\n",
      "196.277737751\n",
      "195.961585648\n",
      "195.726025752\n",
      "195.813779417\n",
      "195.989995177\n",
      "196.329250579\n",
      "196.67696277\n",
      "196.792292631\n",
      "196.750470197\n",
      "196.681381173\n",
      "196.739433353\n",
      "196.937819734\n",
      "197.245842014\n",
      "197.585338542\n",
      "197.990549769\n",
      "198.338766879\n",
      "198.676500289\n",
      "198.928203125\n",
      "199.153605806\n",
      "199.321792535\n",
      "199.514811439\n",
      "199.774338831\n",
      "200.07210841\n",
      "200.368380112\n",
      "200.375531925\n",
      "199.115501061\n",
      "196.716903935\n",
      "195.851011767\n",
      "195.589880883\n",
      "195.566331019\n",
      "195.693993538\n",
      "196.001635802\n",
      "196.432880498\n",
      "197.007366416\n",
      "196.937951871\n",
      "196.779508584\n",
      "196.711648823\n",
      "196.837891107\n",
      "197.096289545\n",
      "197.427077064\n",
      "197.815610532\n",
      "198.215906636\n",
      "198.606847029\n",
      "198.946904417\n",
      "199.238063272\n",
      "199.48071711\n",
      "199.698760127\n",
      "199.931729842\n",
      "200.198982446\n",
      "200.515760995\n",
      "200.580015914\n",
      "199.378847897\n",
      "196.75057581\n",
      "194.860234857\n",
      "194.786441454\n",
      "194.828194444\n",
      "194.887935957\n",
      "195.080461034\n",
      "195.349103009\n",
      "195.509461806\n",
      "195.514571759\n",
      "195.527659626\n",
      "195.645608603\n",
      "196.206231674\n",
      "196.370946663\n",
      "196.723557581\n",
      "197.117769579\n",
      "197.537938368\n",
      "197.889046586\n",
      "198.193838252\n",
      "198.464436246\n",
      "198.748937596\n",
      "199.011520544\n",
      "199.264881848\n",
      "199.548143326\n",
      "199.868523823\n",
      "200.20695409\n",
      "200.601408661\n",
      "200.651766975\n",
      "199.162037519\n",
      "196.427723283\n",
      "195.187722319\n",
      "194.816343557\n",
      "194.747519772\n",
      "194.721737558\n",
      "194.671236015\n",
      "194.782290702\n",
      "195.023525752\n",
      "195.208863329\n",
      "195.270320216\n",
      "195.317320602\n",
      "195.446374421\n",
      "195.68770544\n",
      "196.034828318\n",
      "196.849826871\n",
      "196.997381848\n",
      "197.304269387\n",
      "197.629301215\n",
      "197.898032407\n",
      "198.141335359\n",
      "198.405421489\n",
      "198.691390818\n",
      "198.981736111\n",
      "199.247951389\n",
      "199.539479649\n",
      "199.854392361\n",
      "200.167989005\n",
      "200.532747396\n",
      "200.855031346\n",
      "200.722199074\n",
      "198.784009934\n",
      "196.025254147\n",
      "195.203795332\n",
      "194.927056327\n",
      "194.876310282\n",
      "194.867590181\n",
      "194.892807195\n",
      "195.094332562\n",
      "195.345662616\n",
      "195.46537037\n",
      "195.497264178\n",
      "195.52757909\n",
      "195.673719618\n",
      "195.947222704\n",
      "196.312374614\n",
      "197.139460841\n",
      "197.285055459\n",
      "197.562516879\n",
      "197.8520163\n",
      "198.14638262\n",
      "198.404010899\n",
      "198.647138792\n",
      "198.890645737\n",
      "199.150339024\n",
      "199.43897473\n",
      "199.745135513\n",
      "200.1007962\n",
      "200.480433546\n",
      "200.852166763\n",
      "200.880951485\n",
      "199.457115162\n",
      "196.841473283\n",
      "195.733816551\n",
      "195.465005305\n",
      "195.621583237\n",
      "195.81945409\n",
      "196.12913966\n",
      "196.355085359\n",
      "196.359356192\n",
      "196.259851948\n",
      "196.210511671\n",
      "196.318475598\n",
      "196.567763792\n",
      "196.916717785\n",
      "197.303097512\n",
      "198.090411844\n",
      "198.232850598\n",
      "198.461903453\n",
      "198.683317901\n",
      "198.886833526\n",
      "199.091865837\n",
      "199.314002218\n",
      "199.573475598\n",
      "199.877349055\n",
      "200.227330729\n",
      "200.541621335\n",
      "200.30621576\n",
      "198.375033758\n",
      "196.090434028\n",
      "195.534137249\n",
      "195.315527103\n",
      "195.326673418\n",
      "195.457169174\n",
      "195.739221161\n",
      "196.132848669\n",
      "196.35105951\n",
      "196.342238619\n",
      "196.280110436\n",
      "196.312781636\n",
      "196.496097608\n",
      "196.794598283\n",
      "197.1701114\n",
      "197.563656443\n",
      "197.972830826\n",
      "198.354304591\n",
      "198.653300058\n",
      "199.254789255\n",
      "199.350473573\n",
      "199.530554591\n",
      "199.732086709\n",
      "199.951045042\n",
      "200.207644676\n",
      "200.532556906\n",
      "200.881017554\n",
      "201.236748167\n",
      "201.134062018\n",
      "199.210548804\n",
      "196.714246721\n",
      "195.718180941\n",
      "195.493919753\n",
      "195.478306809\n",
      "195.479947434\n",
      "195.493607735\n",
      "195.677252122\n",
      "195.930849248\n",
      "196.096359471\n",
      "196.147573302\n",
      "196.194510513\n",
      "196.329481578\n",
      "196.59270544\n",
      "196.943388792\n",
      "197.352957658\n",
      "197.773519001\n",
      "198.179209105\n",
      "198.50232446\n",
      "198.819089506\n",
      "199.091260127\n",
      "199.709290123\n",
      "199.837148437\n",
      "200.090568094\n",
      "200.377375579\n",
      "200.678550829\n",
      "200.988914931\n",
      "201.33136767\n",
      "201.707050058\n",
      "201.89663966\n",
      "200.959632523\n",
      "198.367693383\n",
      "196.603275945\n",
      "196.270146605\n",
      "196.173160204\n",
      "196.182423804\n",
      "196.189135802\n",
      "196.322398727\n",
      "196.599061535\n",
      "196.871576485\n",
      "196.865406539\n",
      "196.927380401\n",
      "197.100861786\n",
      "197.394088059\n",
      "197.760528549\n",
      "198.151781925\n",
      "198.532850598\n",
      "198.895241609\n",
      "199.188117766\n",
      "199.4669049\n",
      "199.744277103\n",
      "200.287063561\n",
      "200.398903839\n",
      "200.614475309\n",
      "200.864686053\n",
      "201.131486786\n",
      "201.448992573\n",
      "201.802757041\n",
      "202.144840374\n",
      "202.212930652\n",
      "201.003278839\n",
      "198.377179302\n",
      "197.300383391\n",
      "196.915116223\n",
      "196.846594329\n",
      "196.91140625\n",
      "197.019579958\n",
      "197.240418596\n",
      "197.443225791\n",
      "197.476750579\n",
      "197.375021219\n",
      "197.225431617\n",
      "197.138923611\n",
      "197.200265721\n",
      "197.364781057\n",
      "197.627750289\n",
      "197.933046393\n",
      "198.246476659\n",
      "198.490211709\n",
      "198.646472801\n",
      "198.737812018\n",
      "198.863253762\n",
      "199.261158854\n",
      "199.372179302\n",
      "199.59976659\n",
      "199.888165509\n",
      "200.205019772\n",
      "200.557327836\n",
      "200.384396701\n",
      "198.703757716\n",
      "196.29033613\n",
      "195.726989294\n",
      "195.48861738\n",
      "195.508443287\n",
      "195.626662809\n",
      "195.891078318\n",
      "196.239891493\n",
      "196.470439333\n",
      "196.47070843\n",
      "196.377545332\n",
      "196.346184896\n",
      "196.48635272\n",
      "196.725891686\n",
      "197.077906057\n",
      "197.450419078\n",
      "197.844730903\n",
      "198.185688175\n",
      "198.531352238\n",
      "198.822384742\n",
      "199.095058835\n",
      "199.329652778\n",
      "199.581224923\n",
      "199.80861304\n",
      "200.270623071\n",
      "200.381586613\n",
      "200.600489969\n",
      "200.867616705\n",
      "201.060555556\n",
      "200.306539352\n",
      "197.581225887\n",
      "195.706028164\n",
      "195.277497589\n",
      "195.131707176\n",
      "195.147236208\n",
      "195.14453559\n",
      "195.215428241\n",
      "195.449241898\n",
      "195.640027971\n",
      "195.705394483\n",
      "195.68625\n",
      "195.72208044\n",
      "196.139734761\n",
      "196.483434606\n",
      "196.876200328\n",
      "197.286300637\n",
      "197.633747589\n",
      "197.998967496\n",
      "198.28373505\n",
      "198.547518326\n",
      "198.797524113\n",
      "199.054750193\n",
      "199.33438561\n",
      "199.631763117\n",
      "200.256091339\n",
      "200.402849151\n",
      "200.700978974\n",
      "200.864620949\n",
      "200.087812982\n",
      "197.389098669\n",
      "195.875534819\n",
      "195.397103588\n",
      "195.235096451\n",
      "195.245436439\n",
      "195.272867477\n",
      "195.416581308\n",
      "195.677038002\n",
      "195.868168885\n",
      "195.901018519\n",
      "195.864018133\n",
      "195.92828125\n",
      "196.09778887\n",
      "196.367683256\n",
      "196.696088445\n",
      "197.067121431\n",
      "197.433172261\n",
      "197.768336227\n",
      "198.052767168\n",
      "198.284228877\n",
      "198.530451871\n",
      "198.770934124\n",
      "198.983823302\n",
      "199.220418596\n",
      "199.535935571\n",
      "199.923769772\n",
      "200.585758584\n",
      "200.433496817\n",
      "198.547144579\n",
      "196.314849537\n",
      "195.441930459\n",
      "195.233744213\n",
      "195.264333526\n",
      "195.397826485\n",
      "195.670476466\n",
      "196.062592593\n",
      "196.332023534\n",
      "196.393856096\n",
      "196.334400077\n",
      "196.378678627\n",
      "196.638636671\n",
      "197.077311921\n"
     ]
    }
   ],
   "source": [
    "import os\n",
    "import subprocess as sp\n",
    "import numpy\n",
    "import select\n",
    "import sys\n",
    "\n",
    "#set up ffmpeg\n",
    "FFMPEG_BIN = \"ffmpeg\"\n",
    "video = '556.mp4'\n",
    "width = 1920\n",
    "height = 1080\n",
    "command = [ FFMPEG_BIN,\n",
    "            '-i', video,\n",
    "            '-f', 'image2pipe',\n",
    "            '-pix_fmt', 'rgb24',\n",
    "            '-vcodec', 'rawvideo', '-']\n",
    "pipe = sp.Popen(command, stdout = sp.PIPE, bufsize=10**8)\n",
    "\n",
    "#return red value from each frame\n",
    "def captureFrame():\n",
    "    # read 1920*1080*3 bytes (= 1 frame)\n",
    "    raw_image = pipe.stdout.read(width*height*3)\n",
    "    # transform the byte read into a numpy array\n",
    "    image =  numpy.fromstring(raw_image, dtype='uint8')\n",
    "    frameTotalByteSize = width*height*3\n",
    "    if len(image) < frameTotalByteSize:\n",
    "        return False\n",
    "    image = image.reshape((width,height,3))\n",
    "    # throw away the data in the pipe's buffer.\n",
    "    pipe.stdout.flush()\n",
    "    totalRed = 0\n",
    "    for col in range(0, width):\n",
    "        for row in range(0, height):\n",
    "            totalRed += image[col][row][0]\n",
    "    return totalRed/1.0/width/height\n",
    "\n",
    "print 'Loading the video'\n",
    "rValueList = list()\n",
    "while True:\n",
    "    r = captureFrame()\n",
    "    if not r:\n",
    "        break\n",
    "    else:\n",
    "        rValueList.append(r)\n",
    "    print r\n",
    "print 'finished'"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "#obtain rr intervals from red value\n",
    "def constructRRListFromRedValueList(redValueList, fps):\n",
    "    timePerFrame = 1.0/fps\n",
    "    rrList = list()\n",
    "    lastMaxIndex = False\n",
    "    for i in range(1, redValueList-1):\n",
    "        previousSlope = redValueList[i] - redValueList[i-1]\n",
    "        afterSlope = redValueList[i+1] - redValueList[i]\n",
    "        # if at that point it is concave down = local max\n",
    "        if previousSlope*afterslope < 0 and previousSlope > 0:\n",
    "            if lastMaxIndex:\n",
    "                rrInterval = (i-lastMax)*timePerFrame\n",
    "                rrList.append(rrInterval)\n",
    "        lastMaxIndex = i\n",
    "    return rrList"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {
    "collapsed": false
   },
   "outputs": [],
   "source": [
    "file = open('temp', 'w')\n",
    "numpy.savetxt(file, rValueList)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "907\n"
     ]
    }
   ],
   "source": [
    "print len(rValueList)\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 2",
   "language": "python",
   "name": "python2"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 2
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython2",
   "version": "2.7.11"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 0
}
